{
  "name": "RAG chat",
  "nodes": [
    {
      "parameters": {
        "fileSelector": "rag_data/test.json",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -1620,
        320
      ],
      "id": "236777b4-6ba6-41b9-820e-72b2b53962da",
      "name": "Read/Write Files from Disk",
      "alwaysOutputData": false
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -1900,
        320
      ],
      "id": "68db6f32-7cef-4722-a071-029f9a209064",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -1400,
        320
      ],
      "id": "cf5ff28f-5c1f-40e6-bbd4-9968a197c99d",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "mode": "insert",
        "clearStore": true
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.1,
      "position": [
        -1120,
        320
      ],
      "id": "1acd90fa-3878-47b6-8dc7-55fe27057e04",
      "name": "Simple Vector Store"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        -1060,
        580
      ],
      "id": "37bf7406-4c44-421d-97d5-457129975b08",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Ты консультант по продаже сотовых телефонов"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        -300,
        180
      ],
      "id": "1a9bb814-1d06-4d3d-96f7-94388e1817a1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "kn_base",
        "toolDescription": "Цены на телефоны"
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.1,
      "position": [
        -60,
        400
      ],
      "id": "d39a0823-8472-4634-9c66-f7c8f9ddbab3",
      "name": "Simple Vector Store1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -540,
        180
      ],
      "id": "4859f3ab-377c-429e-81d3-5667e4b11db0",
      "name": "When chat message received",
      "webhookId": "4e688d0b-c975-45a8-8eb9-fb6ba5dfdabe"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt://b1g8i6bj34avp7kulp7h/yandexgpt-lite/latest",
          "mode": "list",
          "cachedResultName": "gpt://b1g8i6bj34avp7kulp7h/yandexgpt-lite/latest"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -380,
        460
      ],
      "id": "abb6f93b-d0c0-4499-85db-950c0a47251d",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "52EXMlhXUvDgqAxp",
          "name": "Yandex account"
        }
      }
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        40,
        620
      ],
      "id": "9a403e78-068b-4718-95d2-f1ee6612abf8",
      "name": "Embeddings Ollama",
      "credentials": {
        "ollamaApi": {
          "id": "aS4Szw7aPB2jRdMu",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        -1200,
        560
      ],
      "id": "58671680-69a6-4d9a-83a7-ba0bbec71182",
      "name": "Embeddings Ollama1",
      "credentials": {
        "ollamaApi": {
          "id": "aS4Szw7aPB2jRdMu",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "mode": "load",
        "prompt": " ",
        "includeDocumentMetadata": false
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.1,
      "position": [
        -1680,
        660
      ],
      "id": "c7889117-2003-4361-b1b7-ae156d20a8af",
      "name": "Simple Vector Store2",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        -1660,
        880
      ],
      "id": "1bad91d6-4dee-402c-b106-86ad62f24437",
      "name": "Embeddings Ollama2",
      "credentials": {
        "ollamaApi": {
          "id": "aS4Szw7aPB2jRdMu",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -180,
        560
      ],
      "id": "3f6f2c52-2e0a-48c5-8250-17aeabb12eb3",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "separator": "={{\"\\n\"}}",
        "chunkSize": 10,
        "chunkOverlap": 2
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        -980,
        800
      ],
      "id": "14030f38-6cd0-4f96-b614-8971fc6640fe",
      "name": "Character Text Splitter"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          },
          {
            "node": "Simple Vector Store2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Simple Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Simple Vector Store": {
      "main": [
        []
      ]
    },
    "Simple Vector Store1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama": {
      "ai_embedding": [
        [
          {
            "node": "Simple Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama1": {
      "ai_embedding": [
        [
          {
            "node": "Simple Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama2": {
      "ai_embedding": [
        [
          {
            "node": "Simple Vector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "9afabe2a-0f3e-4a97-968f-d70458f10084",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "ce97581ac8341e24a821db3be9cd281996d59b1cc5c6787fae1b6178690bc83e"
  },
  "id": "UZjiTk7bTGu0sg5e",
  "tags": []
}